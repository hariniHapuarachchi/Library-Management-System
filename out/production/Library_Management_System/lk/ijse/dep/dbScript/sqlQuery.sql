CREATE DATABASE Library;

CREATE TABLE Member(
  mId VARCHAR(10) NOT NULL PRIMARY KEY ,
  mName VARCHAR(30) NOT NULL ,
  mAddress VARCHAR(50) NOT NULL ,
  mobile varchar(11),
  nic varchar(10),
  mType varchar(30)
);

CREATE TABLE Author(
  aId VARCHAR(10) NOT NULL PRIMARY KEY ,
  aName VARCHAR(30) NOT NULL

);

CREATE TABLE Publisher(
  pId VARCHAR(10) NOT NULL PRIMARY KEY ,
  pName VARCHAR(30) NOT NULL

);

CREATE TABLE Book(
  bId VARCHAR(10) NOT NULL PRIMARY KEY ,
  bName VARCHAR(30) NOT NULL ,
  copies INT
);

CREATE TABLE ReturnBook(
  rId VARCHAR(10) NOT NULL PRIMARY KEY ,
  rDate varchar(20),
  fine DOUBLE,
  exDate VARCHAR(20),
  status VARCHAR(30)
);

CREATE TABLE BookWithAuthor(
  baId VARCHAR(10) NOT NULL PRIMARY KEY ,
  bookId VARCHAR(10) NOT NULL,
  authorId VARCHAR(10) NOT NULL ,

  CONSTRAINT FOREIGN KEY(bookId) REFERENCES Book(bId),
  CONSTRAINT FOREIGN KEY (authorId) REFERENCES Author(aId)
);



CREATE TABLE BookWithPublisher(
  bpId VARCHAR(10) NOT NULL PRIMARY KEY ,
  pBookId VARCHAR(10) NOT NULL,
  pubId VARCHAR(10) NOT NULL ,
  publishDate VARCHAR(30),

  CONSTRAINT FOREIGN KEY(pBookId) REFERENCES Book(bId),
  CONSTRAINT FOREIGN KEY (pubId) REFERENCES Publisher(pId)
);

CREATE TABLE IssuedBook(
  issueId VARCHAR(10) NOT NULL PRIMARY KEY ,
  iBookId VARCHAR(10) NOT NULL,
  iMemId VARCHAR(10) NOT NULL ,
  issuedDate VARCHAR(30),
  returnId VARCHAR(10) NOT NULL ,

  CONSTRAINT FOREIGN KEY(iBookId) REFERENCES Book(bId),
  CONSTRAINT FOREIGN KEY (iMemId) REFERENCES Member(mId),
  CONSTRAINT FOREIGN KEY (returnId) REFERENCES ReturnBook(rId)
);